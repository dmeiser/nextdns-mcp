version: 3
name: nextdns-mcp
displayName: NextDNS MCP Server Catalog
registry:
  nextdns:
    title: "NextDNS MCP Server"
    description: "Model Context Protocol server for NextDNS API. Complete profile management, DoH testing, logs, analytics (including time-series), security settings, blocklists, and parental controls through 76 comprehensive tools. Supports individual entry updates (PATCH), bulk replacements (PUT), and time-series analytics for charting. OpenAPI spec provides 100% NextDNS API coverage with 82 documented operations."
    type: "server"
    image: "nextdns-mcp:latest"
    dateAdded: "2025-10-25T00:00:00Z"
    
    # Command to run (default entrypoint should work, API key passed via env)
    command: []

    # Required secrets
    secrets:
      - name: nextdns.api_key
        env: NEXTDNS_API_KEY
        description: "API key from https://my.nextdns.io/account"
        example: "your_api_key_here"

    # Environment variables for configuration
    env:
      - name: NEXTDNS_DEFAULT_PROFILE
        description: "Default NextDNS profile ID to use when profile_id is omitted"
        value: ""
      - name: NEXTDNS_HTTP_TIMEOUT
        description: "HTTP request timeout in seconds"
        value: "30"
      - name: NEXTDNS_READABLE_PROFILES
        description: "Comma-separated list of profile IDs that can be read (use 'ALL' for all profiles, empty for none)"
        value: "ALL"
      - name: NEXTDNS_WRITABLE_PROFILES
        description: "Comma-separated list of profile IDs that can be written (use 'ALL' for all profiles, empty for none)"
        value: "ALL"
      - name: NEXTDNS_READ_ONLY
        description: "Enable read-only mode to disable all write operations (true/false)"
        value: "false"

    # Available tools (76 total: 75 API operations + 1 custom DoH lookup)
    # Note: 2 operations excluded from tools (truly unsupported):
    #       - 1 streamLogs SSE endpoint (FastMCP limitation - Server-Sent Events)
    #       - 1 getAnalyticsDomainsSeries (NextDNS API bug - returns 404)
    # Note: 7 PUT bulk replacement tools are auto-generated from OpenAPI spec (FastMCP 3.x
    #       natively handles array-body endpoints via the body parameter)
    tools:
      # DNS Testing (1 custom)
      - name: dohLookup

      # Profile Management (5)
      - name: listProfiles
      - name: getProfile
      - name: createProfile
      - name: updateProfile
      - name: deleteProfile

      # Settings (11)
      - name: getSettings
      - name: updateSettings
      - name: getLogsSettings
      - name: updateLogsSettings
      - name: getBlockPageSettings
      - name: updateBlockPageSettings
      - name: getPerformanceSettings
      - name: updatePerformanceSettings
      # Web3 settings not currently in NextDNS API

      # Logs (3)
      - name: getLogs
      # streamLogs excluded - SSE streaming not supported by FastMCP
      - name: downloadLogs
      - name: clearLogs

      # Analytics - Base Endpoints (11)
      - name: getAnalyticsStatus
      - name: getAnalyticsDomains
      - name: getAnalyticsReasons
      - name: getAnalyticsIPs
      - name: getAnalyticsDevices
      - name: getAnalyticsProtocols
      - name: getAnalyticsQueryTypes
      - name: getAnalyticsIPVersions
      - name: getAnalyticsDNSSEC
      - name: getAnalyticsEncryption
      - name: getAnalyticsDestinations

      # Analytics - Time-Series (10)
      - name: getAnalyticsStatusSeries
      # getAnalyticsDomainsSeries excluded - returns 404 from NextDNS API
      - name: getAnalyticsReasonsSeries
      - name: getAnalyticsIPsSeries
      - name: getAnalyticsDevicesSeries
      - name: getAnalyticsProtocolsSeries
      - name: getAnalyticsQueryTypesSeries
      - name: getAnalyticsIPVersionsSeries
      - name: getAnalyticsDNSSECSeries
      - name: getAnalyticsEncryptionSeries
      - name: getAnalyticsDestinationsSeries

      # Content Lists - Denylist (5)
      - name: getDenylist
      - name: addToDenylist
      - name: removeFromDenylist
      - name: replaceDenylist          # Bulk replacement (JSON array via body param)
      - name: updateDenylistEntry      # Update individual entry (PATCH)

      # Content Lists - Allowlist (5)
      - name: getAllowlist
      - name: addToAllowlist
      - name: removeFromAllowlist
      - name: replaceAllowlist         # Bulk replacement (JSON array via body param)
      - name: updateAllowlistEntry     # Update individual entry (PATCH)

      # Security - Settings (2)
      - name: getSecuritySettings
      - name: updateSecuritySettings

      # Security - TLDs (4)
      - name: getSecurityTLDs
      - name: addSecurityTLD
      - name: removeSecurityTLD
      - name: replaceSecurityTLDs      # Bulk replacement (JSON array via body param)

      # Privacy - Settings (2)
      - name: getPrivacySettings
      - name: updatePrivacySettings

      # Privacy - Blocklists (4)
      - name: getPrivacyBlocklists
      - name: addPrivacyBlocklist
      - name: removePrivacyBlocklist
      - name: replacePrivacyBlocklists # Bulk replacement (JSON array via body param)

      # Privacy - Native Tracking (4)
      - name: getPrivacyNatives
      - name: addPrivacyNative
      - name: removePrivacyNative
      - name: replacePrivacyNatives    # Bulk replacement (JSON array via body param)

      # Parental Control - Settings (2)
      - name: getParentalControlSettings
      - name: updateParentalControlSettings

      # Parental Control - Services (5)
      - name: getParentalControlServices
      - name: addToParentalControlServices
      - name: removeFromParentalControlServices
      - name: replaceParentalControlServices    # Bulk replacement (JSON array via body param)
      - name: updateParentalControlServiceEntry # Update individual service (PATCH)

      # Parental Control - Categories (5)
      - name: getParentalControlCategories
      - name: addToParentalControlCategories
      - name: removeFromParentalControlCategories
      - name: replaceParentalControlCategories    # Bulk replacement (JSON array via body param)
      - name: updateParentalControlCategoryEntry  # Update individual category (PATCH)

    # Metadata
    metadata:
      category: "dns,networking,api,security,privacy,parental-control"
      tags:
        - dns
        - nextdns
        - analytics
        - time-series
        - security
        - privacy
        - parental-controls
        - bulk-operations
        - api
        - access-control
      license: "MIT"

    # Documentation
    readme: "https://github.com/dmeiser/nextdns-mcp/blob/main/README.md"
    source: "https://github.com/dmeiser/nextdns-mcp"
    upstream: "https://api.nextdns.io"
