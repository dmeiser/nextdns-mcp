name: nextdns-mcp-catalog
displayName: NextDNS MCP Server Catalog
registry:
  nextdns:
    title: "NextDNS MCP Server"
    description: "Model Context Protocol server for NextDNS API. Complete profile management, DoH testing, logs, analytics (including time-series), security settings, blocklists, and parental controls through 76 comprehensive tools. Supports individual entry updates (PATCH), bulk replacements (PUT), and time-series analytics for charting. OpenAPI spec provides 100% NextDNS API coverage with 82 documented operations."
    type: "server"
    image: "nextdns-mcp:latest"
    dateAdded: "2025-10-25T00:00:00Z"
    
    # Command to run (default entrypoint should work, API key passed via env)
    command: []

    # Required secrets
    secrets:
      - name: nextdns.api_key
        env: NEXTDNS_API_KEY
        description: "API key from https://my.nextdns.io/account"
        example: "your_api_key_here"

    # Optional environment variables (config)
    config:
      - name: nextdns
        description: "NextDNS server configuration"
        type: object
        properties:
          default_profile:
            type: string
            description: "Default NextDNS profile ID to use"
          http_timeout:
            type: string
            description: "HTTP request timeout in seconds"
            default: "30"

    # Available tools (76 total: 68 enabled API operations + 7 custom bulk operations + 1 custom DoH lookup)
    # Note: 2 operations excluded from tools (truly unsupported):
    #       - 1 streamLogs SSE endpoint (FastMCP limitation - Server-Sent Events)
    #       - 1 getAnalyticsDomainsSeries (NextDNS API bug - returns 404)
    # Note: 7 PUT bulk operations now available via custom implementations:
    #       - Custom tools accept JSON array strings and handle array-to-body conversion
    tools:
      # DNS Testing (1 custom)
      - name: dohLookup

      # Profile Management (5)
      - name: listProfiles
      - name: getProfile
      - name: createProfile
      - name: updateProfile
      - name: deleteProfile

      # Settings (11)
      - name: getSettings
      - name: updateSettings
      - name: getLogsSettings
      - name: updateLogsSettings
      - name: getBlockPageSettings
      - name: updateBlockPageSettings
      - name: getPerformanceSettings
      - name: updatePerformanceSettings
      # Web3 settings not currently in NextDNS API

      # Logs (3)
      - name: getLogs
      # streamLogs excluded - SSE streaming not supported by FastMCP
      - name: downloadLogs
      - name: clearLogs

      # Analytics - Base Endpoints (11)
      - name: getAnalyticsStatus
      - name: getAnalyticsDomains
      - name: getAnalyticsReasons
      - name: getAnalyticsIPs
      - name: getAnalyticsDevices
      - name: getAnalyticsProtocols
      - name: getAnalyticsQueryTypes
      - name: getAnalyticsIPVersions
      - name: getAnalyticsDNSSEC
      - name: getAnalyticsEncryption
      - name: getAnalyticsDestinations

      # Analytics - Time-Series (10)
      - name: getAnalyticsStatusSeries
      # getAnalyticsDomainsSeries excluded - returns 404 from NextDNS API
      - name: getAnalyticsReasonsSeries
      - name: getAnalyticsIPsSeries
      - name: getAnalyticsDevicesSeries
      - name: getAnalyticsProtocolsSeries
      - name: getAnalyticsQueryTypesSeries
      - name: getAnalyticsIPVersionsSeries
      - name: getAnalyticsDNSSECSeries
      - name: getAnalyticsEncryptionSeries
      - name: getAnalyticsDestinationsSeries

      # Content Lists - Denylist (5 - includes custom bulk update)
      - name: getDenylist
      - name: addToDenylist
      - name: removeFromDenylist
      - name: updateDenylist           # Custom bulk replacement (JSON array string)
      - name: updateDenylistEntry      # Update individual entry (PATCH)

      # Content Lists - Allowlist (5 - includes custom bulk update)
      - name: getAllowlist
      - name: addToAllowlist
      - name: removeFromAllowlist
      - name: updateAllowlist          # Custom bulk replacement (JSON array string)
      - name: updateAllowlistEntry     # Update individual entry (PATCH)

      # Security - Settings (2)
      - name: getSecuritySettings
      - name: updateSecuritySettings

      # Security - TLDs (4 - includes custom bulk update)
      - name: getSecurityTLDs
      - name: addSecurityTLD
      - name: removeSecurityTLD
      - name: updateSecurityTlds       # Custom bulk replacement (JSON array string)

      # Privacy - Settings (2)
      - name: getPrivacySettings
      - name: updatePrivacySettings

      # Privacy - Blocklists (4 - includes custom bulk update)
      - name: getPrivacyBlocklists
      - name: addPrivacyBlocklist
      - name: removePrivacyBlocklist
      - name: updatePrivacyBlocklists  # Custom bulk replacement (JSON array string)

      # Privacy - Native Tracking (4 - includes custom bulk update)
      - name: getPrivacyNatives
      - name: addPrivacyNative
      - name: removePrivacyNative
      - name: updatePrivacyNatives     # Custom bulk replacement (JSON array string)

      # Parental Control - Settings (2)
      - name: getParentalControlSettings
      - name: updateParentalControlSettings

      # Parental Control - Services (5 - includes custom bulk update)
      - name: getParentalControlServices
      - name: addToParentalControlServices
      - name: removeFromParentalControlServices
      - name: updateParentalControlServices     # Custom bulk replacement (JSON array string)
      - name: updateParentalControlServiceEntry # Update individual service (PATCH)

      # Parental Control - Categories (5 - includes custom bulk update)
      - name: getParentalControlCategories
      - name: addToParentalControlCategories
      - name: removeFromParentalControlCategories
      - name: updateParentalControlCategories     # Custom bulk replacement (JSON array string)
      - name: updateParentalControlCategoryEntry  # Update individual category (PATCH)

    # Metadata
    metadata:
      category: "dns,networking,api,security,privacy,parental-control"
      tags:
        - dns
        - nextdns
        - analytics
        - time-series
        - security
        - privacy
        - parental-controls
        - bulk-operations
        - api
      license: "MIT"

    # Documentation
    # TODO: Replace 'yourusername' with your actual GitHub username or organization
    readme: "https://github.com/yourusername/nextdns-mcp/blob/main/README.md"
    source: "https://github.com/yourusername/nextdns-mcp"
    upstream: "https://api.nextdns.io"
